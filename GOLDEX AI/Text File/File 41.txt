──────────────────────────────────────────────────────────────────────────────
RUN **ONLY** THE LINES THAT BEGIN WITH “$”  (COPY/PASTE ONE BLOCK)
──────────────────────────────────────────────────────────────────────────────
# ─── 0. stay logged-in as root via SSH  ─────────────────────────────

# ─── 1. point Wine to the prefix & update winetricks (30 s) ─────────
$ export WINEPREFIX=$HOME/.wine
$ apt update -y && apt install -y winetricks cabextract
$ winetricks --self-update             # updates verb list

# ─── 2. install the VC++ runtime (quiet, no GUI)  ───────────────────
#     vcrun2019 includes the Universal CRT we need.
$ winetricks -q vcrun2019

#  >>> wait until the prompt returns; no output = success.

# ─── 3. verify the runtime actually got installed  ──────────────────
$ winetricks list-installed | grep vcrun
# expected output:   vcrun2019

# ─── 4. restart wineserver (flush old DLL cache)  ───────────────────
$ wineserver -k && sleep 2

# ─── 5. QUICK connectivity test (shows balance or clear error) ─────
$ DISPLAY=:1 wine C:\\opt\\goldex-bot\\winevenv\\Scripts\\python.exe - <<'PY'
import MetaTrader5 as mt5, os, sys
from dotenv import load_dotenv
load_dotenv('/opt/goldex-bot/.env')
ok = mt5.initialize(login=int(os.getenv('DEMO_LOGIN',0)),
                    password=os.getenv('DEMO_PASSWORD',''),
                    server=os.getenv('DEMO_SERVER',''))
print("✅ Connected — Balance:", mt5.account_info().balance) if ok else \
      sys.exit(f"❌ init failed: {mt5.last_error()}")
mt5.shutdown()
PY

# ─── 6. if you see the ✅ line, start the bot inside tmux ────────────
$ tmux new -s goldex -d "export DISPLAY=:1 && wine C:\\opt\\goldex-bot\\winevenv\\Scripts\\python.exe C:\\opt\\goldex-bot\\goldex_bot.py"
$ echo '🚀  GoldexBot is now running inside tmux session "goldex".'

# ─── 7. watch logs anytime ──────────────────────────────────────────
# $ tmux attach -t goldex       (Ctrl-b then d to detach)

DONE.
If step 5 still crashes with “fetestexcept”, copy-paste the *full* console
output so we can diagnose further.
──────────────────────────────────────────────────────────────────────────────